


<div class="collapsible" (click)="showSuiteTableContainer()">
    Suites
    <i class="bi bi-caret-down-fill" *ngIf="suiteExecutionResultsVisible"></i>
    <i class="bi bi-caret-up-fill" *ngIf="suiteExecutionResultsVisible==false"></i>
</div>
<div *ngIf="suiteExecutionResultsVisible==true">
<!-- <button class="collapsible" (click)="showSuiteSearchContainer()">Suite Search</button>

<div *ngIf="showSuiteSearch"> -->
<div class="container">
<div class="row p-2">
    <div class="col-sm">
        <label class="label">Suite Execution Id</label>
        <input type="text" id="suiteExecutionId" placeholder="" [(ngModel)]="suiteExecutionId" class="form-control">
    </div>
    <div class="col-sm">
        <label class="label">Suite Id</label>
        <input type="text" id="suiteId" placeholder="" [(ngModel)]="suiteId" class="form-control">
    </div>
    <div class="col-sm">
        <label class="label">Suite Name</label>
        <input type="text" id="suiteName" placeholder="" [(ngModel)]="suiteName" class="form-control">
    </div>
    <div class="col-sm">
        <label class="label">Suite URL</label>
        <input type="text" id="suiteUrl" placeholder="" [(ngModel)]="suiteUrl" class="form-control">
    </div>
</div>
<div class="row p-2">

    <div class="col-sm">
        <label class="label">Suite Status</label>
        <ng-multiselect-dropdown [placeholder]="'Select Suite Status'" [settings]="searchDropdownSettings"
            [data]="suiteStatusList" [(ngModel)]="suiteStatusSelected">
        </ng-multiselect-dropdown>
    </div>

    <div class="col-sm">
        <label class="label">Suite Created By</label>
        <ng-multiselect-dropdown [placeholder]="'Select Executed By'" [settings]="searchDropdownSettings"
            [data]="createdByList" [(ngModel)]="createdBySelected">
        </ng-multiselect-dropdown>
    </div>

    <div class="col-sm">
        <label class="label">Created Date From</label>
        <input type="date" id="suiteExecutedDateFrom" class="form-select" [(ngModel)]="suiteExecutedDateFrom">
    </div>

    <div class="col-sm">
        <label class="label">Created Date To</label>
        <input type="date" id="suiteExecutedDateTo" placeholder="Suite Created Date To" class="form-select"
            [(ngModel)]="suiteExecutedDateTo">

    </div>
</div>
<div class="row mt-3 mb-3">
    <div class="d-flex justify-content-center">
        <div class="px-2">
            <button type="button" class="primary-btn" (click)="fetchSuiteExecutionDetails()">Search</button>
        </div>
        <div class="px-2">
            <button type="button" class="secondary-btn" (click)="clearSuiteSearch()">Clear</button>
        </div>
    </div>
</div>
</div>

<div class="d-flex justify-content-center mt-3">
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li [ngClass]="(hasPreviousPage==false)?'page-item disabled':'page-item disabled'">
            <a class="pagination-previous-btn" (click)="fetchPreviousPageTestSuiteExecutionHistory()">
                <span aria-hidden="true">&laquo;</span> 
                <span class="sr-only">Previous</span>
            </a>
          </li>
          
          <li>
            <input class="pagination-textbox" type="number"  (change)="getTestSuiteExecutionHistoryPage()" [(ngModel)]="currentPage">
          </li>
          
          <li>
            <input class="pagination-textbox" type="number"  [(ngModel)]="totalPages" disabled>
          </li>
          
          <li [ngClass]="(hasNextPage==false)?'page-item':'page-item disabled'">
            <a class="pagination-next-btn" (click)="fetchNextPageTestSuiteExecutionHistory()">
                <span class="sr-only">Next</span>
                <span aria-hidden="true">&raquo;</span>
                
            </a>
          </li>
        </ul>
      </nav>
    </div>

<div class="suite-exec-table table-responsive scrollable-div mt-2">
    <table class="table table-borderless table-hover">
        <thead class="table-header">
            <th class="table-header-cols header-width-5"> SUITE EXECUTION ID</th>
            <th class="table-header-cols header-width-5"> ACTION</th>
            <th class="table-header-cols header-width-5"> SUITE ID</th>
            <th class="table-header-cols header-width-5"> SUITE NAME</th>
            <th class="table-header-cols header-width-5"> SUITE DESCRIPTION</th>
            <th class="table-header-cols header-width-5"> SUITE STATUS</th>
            <th class="table-header-cols header-width-5"> URL</th>
            <th class="table-header-cols header-width-5"> BROWSER</th>
            <th class="table-header-cols header-width-5"> CREATED BY</th>
            <th class="table-header-cols header-width-5"> CREATED DATE</th>
        </thead>
        <tbody class="table-body">

            <tr #currentRow *ngFor="let suite of testSuiteExecutionHistory; let i = index">

                <td>
                    <ng-container *ngIf="suite.suiteStatus === 'Queued'">
                        <button class="queued" (click)="getTestScriptsExecutionHistory(suite.executionId)">{{suite.suiteId}}
                        </button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'In-progress'">
                        <button class="inprogress"
                            (click)="getTestScriptsExecutionHistory(suite.executionId)">{{suite.executionId}} </button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'Completed'">
                        <button class="completed"
                            (click)="getTestScriptsExecutionHistory(suite.executionId)">{{suite.executionId}} </button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'Error'">
                        <button class="error" (click)="getTestScriptsExecutionHistory(suite.executionId)">{{suite.executionId}}
                        </button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'Canceled'">
                        <button class="error" (click)="getTestScriptsExecutionHistory(suite.executionId)">{{suite.executionId}}
                        </button>
                    </ng-container>
                </td>
                <td>
                    <ng-container *ngIf="suite.suiteStatus === 'Queued'">
                        <button class="queued" (click)="getTestScriptsExecutionHistory(suite.executionId)"
                            disabled>Execute</button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'In-progress'">
                        <button class="inprogress"
                            (click)="cancelSuiteExecution(suite.executionId)">Cancel</button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'Completed'">
                        <button class="completed"
                            (click)="viewReport(suite.executionId)">View</button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'Error'">
                        <button class="error" (click)="getTestScriptsExecutionHistory(suite.executionId)">Re-run</button>
                    </ng-container>
                    <ng-container *ngIf="suite.suiteStatus === 'Canceled'">
                        <button class="error" (click)="getTestScriptsExecutionHistory(suite.executionId)">Execute
                        </button>
                    </ng-container>
                </td>

                <td>
                    {{suite.suiteId}}
                </td>

                <td>
                    {{suite.suiteName}}
                </td>

                <td>
                    {{suite.suiteDescription}}
                </td>

                <td>
                    {{suite.suiteStatus}}
                </td>

                <td>
                    {{suite.url}}
                </td>

                <td>
                    {{suite.browser}}
                </td>

                <td>
                    {{suite.executedBy}}
                </td>

                <td>
                    {{suite.executedDate}}
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>