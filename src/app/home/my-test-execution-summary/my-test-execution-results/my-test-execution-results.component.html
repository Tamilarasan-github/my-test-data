<div class="container-xxl mw-100">
    <div>
        <button class="collapsible">Test Execution Results</button>
    </div>
    <div class="container-xxl mw-100">
        <div class="d-flex justify-content-center">

            <div class="my-2 px-1">
                <ngb-pagination [collectionSize]="dataCollectionSize" [(page)]="page" [pageSize]="pageSize"
                    [maxSize]="5" [rotate]="true" [boundaryLinks]="true" (pageChange)="pageChange()">
                </ngb-pagination>
            </div>

            <div ngbDropdown class="my-2 px-1">
                <button ngbDropdownToggle type="button" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-download" viewBox="0 0 16 16">
                        <path
                            d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                        <path
                            d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z" />
                    </svg>
                </button>
                <div ngbDropdownMenu>
                    <a ngbDropdownItem class="export-dropdown-btn"> All Data </a>
                    <a ngbDropdownItem class="export-dropdown-btn"> Selected Data </a>
                </div>
            </div>

            <div ngbDropdown class="my-2 px-1" [autoClose]="false">
                <button ngbDropdownToggle type="button" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg " width="16 " height="16 " fill="currentColor "
                        class="bi bi-list-columns-reverse " viewBox="0 0 16 16 ">
                        <path fill-rule="evenodd " d="M0 .5A.5.5 0 0 1 .5 0h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 0 .5Zm4 0a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10A.5.5 0 0 1 4 .5Zm-4 2A.5.5 0 0 1 .5 2h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5
                    0 0 1-.5-.5Zm-4 2A.5.5 0 0 1 .5 4h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5Zm-4 2A.5.5 0 0 1 .5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5
                    0 0 1-.5-.5Zm-4 2A.5.5 0 0 1 .5 8h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10a.5.5
                    0 0 1-.5-.5Zm-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5
                    0 0 1-.5-.5Z " />
                    </svg>
                </button>

                <div ngbDropdownMenu>
                    <input class="search-txtbox" type="text " placeholder="Search "
                        (input)="searchColumnsInDropdown($event)">
                    <div ngbDropdownItem class="dropdown-item" *ngFor="let column of filteredColumnsDropdownList ">

                        <input class="columns-dropdown-checkbox" type="checkbox"
                            [checked]="columnsSelectedList.includes(column)"
                            (change)="updateColumnsVisible($event, column)">
                        <label class="columns-dropdown-label">{{column}}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="table-responsive ">

        <table class="table table-borderless table-hover scrollable-div ">

            <thead class="thead-dark table-header ">
            <tbody>
                <tr>
                    <th> <input type="checkbox"> </th>
                    <th> ACTIONS </th>
                    <ng-container *ngFor="let field of fieldNameList">
                        <th *ngIf="columnsSelectedList.includes(field)">{{field}}</th>
                    </ng-container>
                </tr>


                <ng-container
                    *ngFor="let executionMetaData of listOfTestExecutionDataReceived | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">
                    <tr *ngFor="let testData of executionMetaData.test_data_execution">

                        <td> <input type="checkbox"> </td>
                       
                        <ng-container *ngFor="let data of executionMetaData| keyvalue:unsorted ">
                            <td *ngIf="columnsSelectedList.includes(getFieldUsingDbColumnName(data.key))">
                                <ng-container>
                                    <textarea *ngIf="editableTestExecutionResults!=executionMetaData" [disabled]="true"
                                        [(ngModel)]=data.value name={{data.key}} [ngClass]=" 'table-textarea' ">
                                    </textarea>

                                    <textarea *ngIf="editableTestExecutionResults==executionMetaData" [disabled]="true"
                                    [(ngModel)]=data.value name={{data.key}} [ngClass]=" 'table-textarea' ">
                                </textarea>
                                </ng-container>
                            </td>
                        </ng-container>
                        <ng-container *ngFor="let singleTestDataRow of testData | keyvalue:unsorted">
                            <td *ngIf="columnsSelectedList.includes(singleTestDataRow.key)">
                                <textarea [disabled]="true"
                                    name={{singleTestDataRow.key}} [(ngModel)]=singleTestDataRow.value
                                    [ngClass]=" 'table-textarea' ">
                                </textarea>
                            </td>

                        </ng-container>
                    </tr>
                </ng-container>


              

            </tbody>
        </table>
    </div>
</div>